{"remainingRequest":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/babel-loader/lib/index.js!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/utils/index.js","dependencies":[{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/utils/index.js","mtime":1604998570000},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js","mtime":1610420035136},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/babel-loader/lib/index.js","mtime":1607423996145},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/eslint-loader/index.js","mtime":1597388785339}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKdmFyIExPR19QUkVGSVggPSAndHJ0Yy1jYWxsbGluZy13ZWJydGMtZGVtbzonOwpleHBvcnQgZnVuY3Rpb24gaXNWYWxpZGF0ZVBob25lTnVtKHBob25lTnVtKSB7CiAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ14xWzAtOV17MTB9JCcsICdnaScpOwogIHJldHVybiBwaG9uZU51bS5tYXRjaChyZWcpOwp9CmV4cG9ydCBmdW5jdGlvbiBpc1VzZXJOYW1lVmFsaWQodXNlcm5hbWUpIHsKICByZXR1cm4gdXNlcm5hbWUgJiYgdXNlcm5hbWUubGVuZ3RoIDw9IDIwOwp9CmV4cG9ydCBmdW5jdGlvbiBzZXRVc2VyTG9naW5JbmZvKF9yZWYpIHsKICB2YXIgdG9rZW4gPSBfcmVmLnRva2VuLAogICAgICBwaG9uZU51bSA9IF9yZWYucGhvbmVOdW07CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkoewogICAgdG9rZW46IHRva2VuLAogICAgcGhvbmVOdW06IHBob25lTnVtCiAgfSkpOwp9CmV4cG9ydCBmdW5jdGlvbiBhZGRUb1NlYXJjaEhpc3Rvcnkoc2VhcmNoVXNlcikgewogIHZhciBNQVhfSElTVE9SWV9OVU0gPSAzOwogIHZhciBzZWFyY2hVc2VyTGlzdCA9IGdldFNlYXJjaEhpc3RvcnkoKTsKICB2YXIgZm91bmQgPSBzZWFyY2hVc2VyTGlzdC5maW5kKGZ1bmN0aW9uICh1c2VyKSB7CiAgICByZXR1cm4gdXNlci51c2VySWQgPT09IHNlYXJjaFVzZXIudXNlcklkOwogIH0pOwoKICBpZiAoIWZvdW5kKSB7CiAgICBzZWFyY2hVc2VyTGlzdC5wdXNoKHNlYXJjaFVzZXIpOwogIH0KCiAgaWYgKHNlYXJjaFVzZXJMaXN0Lmxlbmd0aCA+IE1BWF9ISVNUT1JZX05VTSkgewogICAgc2VhcmNoVXNlckxpc3QgPSBzZWFyY2hVc2VyTGlzdC5zbGljZSgtTUFYX0hJU1RPUllfTlVNKTsKICB9CgogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWFyY2hIaXN0b3J5JywgSlNPTi5zdHJpbmdpZnkoc2VhcmNoVXNlckxpc3QpKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0U2VhcmNoSGlzdG9yeSgpIHsKICB0cnkgewogICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlYXJjaEhpc3RvcnknKSB8fCAnW10nKTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gW107CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyTG9naW5JbmZvKCkgewogIHRyeSB7CiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKSB8fCAne30nKTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4ge307CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBsb2coY29udGVudCkgewogIGNvbnNvbGUubG9nKCIiLmNvbmNhdChMT0dfUFJFRklYLCAiICIpLmNvbmNhdChjb250ZW50KSk7Cn0="},{"version":3,"sources":["/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/utils/index.js"],"names":["LOG_PREFIX","isValidatePhoneNum","phoneNum","reg","RegExp","match","isUserNameValid","username","length","setUserLoginInfo","token","localStorage","setItem","JSON","stringify","addToSearchHistory","searchUser","MAX_HISTORY_NUM","searchUserList","getSearchHistory","found","find","user","userId","push","slice","parse","getItem","e","getUserLoginInfo","log","content","console"],"mappings":";;;;;;AAAA,IAAMA,UAAU,GAAG,4BAAnB;AAEA,OAAO,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AAC3C,MAAMC,GAAG,GAAG,IAAIC,MAAJ,CAAW,cAAX,EAA2B,IAA3B,CAAZ;AACA,SAAOF,QAAQ,CAACG,KAAT,CAAeF,GAAf,CAAP;AACD;AAED,OAAO,SAASG,eAAT,CAAyBC,QAAzB,EAAmC;AACxC,SAAOA,QAAQ,IAAIA,QAAQ,CAACC,MAAT,IAAmB,EAAtC;AACD;AAED,OAAO,SAASC,gBAAT,OAA6C;AAAA,MAAlBC,KAAkB,QAAlBA,KAAkB;AAAA,MAAXR,QAAW,QAAXA,QAAW;AAClDS,EAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAe;AAACJ,IAAAA,KAAK,EAALA,KAAD;AAAQR,IAAAA,QAAQ,EAARA;AAAR,GAAf,CAAjC;AACD;AAED,OAAO,SAASa,kBAAT,CAA4BC,UAA5B,EAAwC;AAC7C,MAAMC,eAAe,GAAG,CAAxB;AACA,MAAIC,cAAc,GAAGC,gBAAgB,EAArC;AACA,MAAMC,KAAK,GAAGF,cAAc,CAACG,IAAf,CAAoB,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,MAAL,KAAgBP,UAAU,CAACO,MAA/B;AAAA,GAAxB,CAAd;;AACA,MAAI,CAACH,KAAL,EAAY;AACVF,IAAAA,cAAc,CAACM,IAAf,CAAoBR,UAApB;AACD;;AACD,MAAIE,cAAc,CAACV,MAAf,GAAwBS,eAA5B,EAA6C;AAC3CC,IAAAA,cAAc,GAAGA,cAAc,CAACO,KAAf,CAAqB,CAACR,eAAtB,CAAjB;AACD;;AACDN,EAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCC,IAAI,CAACC,SAAL,CAAeI,cAAf,CAAtC;AACD;AAED,OAAO,SAASC,gBAAT,GAA4B;AACjC,MAAI;AACF,WAAON,IAAI,CAACa,KAAL,CAAWf,YAAY,CAACgB,OAAb,CAAqB,eAArB,KAAyC,IAApD,CAAP;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF;AAED,OAAO,SAASC,gBAAT,GAA4B;AACjC,MAAI;AACF,WAAOhB,IAAI,CAACa,KAAL,CAAWf,YAAY,CAACgB,OAAb,CAAqB,UAArB,KAAoC,IAA/C,CAAP;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF;AAED,OAAO,SAASE,GAAT,CAAaC,OAAb,EAAsB;AAC3BC,EAAAA,OAAO,CAACF,GAAR,WAAe9B,UAAf,cAA6B+B,OAA7B;AACD","sourcesContent":["const LOG_PREFIX = 'trtc-callling-webrtc-demo:';\n\nexport function isValidatePhoneNum(phoneNum) {\n  const reg = new RegExp('^1[0-9]{10}$', 'gi');\n  return phoneNum.match(reg);\n}\n\nexport function isUserNameValid(username) {\n  return username && username.length <= 20;\n}\n\nexport function setUserLoginInfo({token, phoneNum}) {\n  localStorage.setItem('userInfo', JSON.stringify({token, phoneNum}));\n}\n\nexport function addToSearchHistory(searchUser) {\n  const MAX_HISTORY_NUM = 3;\n  let searchUserList = getSearchHistory();\n  const found = searchUserList.find(user => user.userId === searchUser.userId);\n  if (!found) {\n    searchUserList.push(searchUser);\n  }\n  if (searchUserList.length > MAX_HISTORY_NUM) {\n    searchUserList = searchUserList.slice(-MAX_HISTORY_NUM);\n  }\n  localStorage.setItem('searchHistory', JSON.stringify(searchUserList));\n}\n\nexport function getSearchHistory() {\n  try {\n    return JSON.parse(localStorage.getItem('searchHistory') || '[]');\n  } catch (e) {\n    return [];\n  }\n}\n\nexport function getUserLoginInfo() {\n  try {\n    return JSON.parse(localStorage.getItem('userInfo') || '{}');\n  } catch (e) {\n    return {};\n  }\n}\n\nexport function log(content) {\n  console.log(`${LOG_PREFIX} ${content}`)\n}\n"]}]}