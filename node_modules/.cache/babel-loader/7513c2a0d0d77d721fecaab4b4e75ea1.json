{"remainingRequest":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/babel-loader/lib/index.js!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/App.vue","mtime":1604998570000},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js","mtime":1610420035136},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/babel-loader/lib/index.js","mtime":1607423996145},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js","mtime":1610420035136},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/vue-loader/lib/index.js","mtime":1610420042252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3h1emhpdGFvL0Rlc2t0b3AvV2ViL1RSVENTY2VuZXNEZW1vL3RydGMtY2FsbGluZy13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBsb2cgfSBmcm9tICIuL3V0aWxzIjsKaW1wb3J0IHsgZ2V0VXNlcm5hbWVCeVVzZXJpZCB9IGZyb20gIi4vc2VydmljZSI7CmltcG9ydCBIZWFkZXJOYXYgZnJvbSAiLi9jb21wb25lbnRzL2hlYWRlci1uYXYiOwp2YXIgdGltZW91dDsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHAiLAogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRlck5hdjogSGVhZGVyTmF2CiAgfSwKICB3YXRjaDogewogICAgaXNMb2dpbjogZnVuY3Rpb24gaXNMb2dpbihuZXdJc0xvZ2luLCBvbGRJc0xvZ2luKSB7CiAgICAgIGlmIChuZXdJc0xvZ2luICE9PSBvbGRJc0xvZ2luKSB7CiAgICAgICAgaWYgKG5ld0lzTG9naW4pIHsKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnBhdGggPT09ICIvbG9naW4iKSB7CiAgICAgICAgICAgIC8vIOmYsuatouW3suWcqCAnLycg6Lev55Sx5LiL5YaN5qyhIHB1c2gKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IG1hcFN0YXRlKHsKICAgIGlzTG9naW46IGZ1bmN0aW9uIGlzTG9naW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlzTG9naW47CiAgICB9LAogICAgbG9naW5Vc2VySW5mbzogZnVuY3Rpb24gbG9naW5Vc2VySW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubG9naW5Vc2VySW5mbzsKICAgIH0sCiAgICBjYWxsU3RhdHVzOiBmdW5jdGlvbiBjYWxsU3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jYWxsU3RhdHVzOwogICAgfSwKICAgIG1lZXRpbmdVc2VySWRMaXN0OiBmdW5jdGlvbiBtZWV0aW5nVXNlcklkTGlzdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubWVldGluZ1VzZXJJZExpc3Q7CiAgICB9LAogICAgbXV0ZVZpZGVvVXNlcklkTGlzdDogZnVuY3Rpb24gbXV0ZVZpZGVvVXNlcklkTGlzdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubXV0ZVZpZGVvVXNlcklkTGlzdDsKICAgIH0sCiAgICBtdXRlQXVkaW9Vc2VySWRMaXN0OiBmdW5jdGlvbiBtdXRlQXVkaW9Vc2VySWRMaXN0KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5tdXRlQXVkaW9Vc2VySWRMaXN0OwogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy5pbml0TGlzdGVuZXIoKTsKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZUF1dG9Mb2dpbigpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzSW52aXRlckNhbmNlbGVkOiBmYWxzZSwKICAgICAgaXNTaG93TmV3SW52aXRhdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIGludml0ZXJOYW1lOiAiIiwKICAgICAgY2FsbFR5cGVEaXNwbGF5TmFtZTogIiIsCiAgICAgIGludml0ZURhdGE6IHt9LAogICAgICBpbnZpdGVJRDogIiIKICAgIH07CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUF1dG9Mb2dpbjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2hhbmRsZUF1dG9Mb2dpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZUF1dG9Mb2dpbigpIHsKICAgICAgICByZXR1cm4gX2hhbmRsZUF1dG9Mb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlQXV0b0xvZ2luOwogICAgfSgpLAogICAgaW5pdExpc3RlbmVyOiBmdW5jdGlvbiBpbml0TGlzdGVuZXIoKSB7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9uKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuRVJST1IsIHRoaXMuaGFuZGxlRXJyb3IpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5vbih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULklOVklURUQsIHRoaXMuaGFuZGxlTmV3SW52aXRhdGlvblJlY2VpdmVkKTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub24odGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5VU0VSX0VOVEVSLCB0aGlzLmhhbmRsZVVzZXJFbnRlcik7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9uKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuVVNFUl9MRUFWRSwgdGhpcy5oYW5kbGVVc2VyTGVhdmUpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5vbih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULlJFSkVDVCwgdGhpcy5oYW5kbGVJbnZpdGVlUmVqZWN0KTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub24odGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5MSU5FX0JVU1ksIHRoaXMuaGFuZGxlSW52aXRlZUxpbmVCdXN5KTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub24odGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5DQUxMSU5HX0NBTkNFTCwgdGhpcy5oYW5kbGVJbnZpdGVyQ2FuY2VsKTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub24odGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5LSUNLRURfT1VULCB0aGlzLmhhbmRsZUtpY2tlZE91dCk7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9uKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuQ0FMTElOR19USU1FT1VULCB0aGlzLmhhbmRsZUNhbGxUaW1lb3V0KTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub24odGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5OT19SRVNQLCB0aGlzLmhhbmRsZU5vUmVzcG9uc2UpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5vbih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULkNBTExfRU5ELCB0aGlzLmhhbmRsZUNhbGxFbmQpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5vbih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULlVTRVJfVklERU9fQVZBSUxBQkxFLCB0aGlzLmhhbmRsZVVzZXJWaWRlb0NoYW5nZSk7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9uKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuVVNFUl9BVURJT19BVkFJTEFCTEUsIHRoaXMuaGFuZGxlVXNlckF1ZGlvQ2hhbmdlKTsKICAgIH0sCiAgICByZW1vdmVMaXN0ZW5lcjogZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoKSB7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9mZih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULkVSUk9SLCB0aGlzLmhhbmRsZUVycm9yKTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub2ZmKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuSU5WSVRFRCwgdGhpcy5oYW5kbGVOZXdJbnZpdGF0aW9uUmVjZWl2ZWQpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5vZmYodGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5VU0VSX0VOVEVSLCB0aGlzLmhhbmRsZVVzZXJFbnRlcik7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9mZih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULlVTRVJfTEVBVkUsIHRoaXMuaGFuZGxlVXNlckxlYXZlKTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub2ZmKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuUkVKRUNULCB0aGlzLmhhbmRsZUludml0ZWVSZWplY3QpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5vZmYodGhpcy5UcnRjQ2FsbGluZy5FVkVOVC5MSU5FX0JVU1ksIHRoaXMuaGFuZGxlSW52aXRlZUxpbmVCdXN5KTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub2ZmKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuQ0FMTElOR19DQU5DRUwsIHRoaXMuaGFuZGxlSW52aXRlckNhbmNlbCk7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9mZih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULktJQ0tFRF9PVVQsIHRoaXMuaGFuZGxlS2lja2VkT3V0KTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub2ZmKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuQ0FMTElOR19USU1FT1VULCB0aGlzLmhhbmRsZUNhbGxUaW1lb3V0KTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub2ZmKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuTk9fUkVTUCwgdGhpcy5oYW5kbGVOb1Jlc3BvbnNlKTsKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcub2ZmKHRoaXMuVHJ0Y0NhbGxpbmcuRVZFTlQuQ0FMTF9FTkQsIHRoaXMuaGFuZGxlQ2FsbEVuZCk7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9mZih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULlVTRVJfVklERU9fQVZBSUxBQkxFLCB0aGlzLmhhbmRsZVVzZXJWaWRlb0NoYW5nZSk7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9mZih0aGlzLlRydGNDYWxsaW5nLkVWRU5ULlVTRVJfQVVESU9fQVZBSUxBQkxFLCB0aGlzLmhhbmRsZVVzZXJBdWRpb0NoYW5nZSk7CiAgICB9LAogICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge30sCiAgICBoYW5kbGVOZXdJbnZpdGF0aW9uUmVjZWl2ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVOZXdJbnZpdGF0aW9uUmVjZWl2ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHBheWxvYWQpIHsKICAgICAgICB2YXIgaW52aXRlSUQsIHNwb25zb3IsIGludml0ZURhdGEsIGNhbGxUeXBlLCB1c2VyTmFtZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaW52aXRlSUQgPSBwYXlsb2FkLmludml0ZUlELCBzcG9uc29yID0gcGF5bG9hZC5zcG9uc29yLCBpbnZpdGVEYXRhID0gcGF5bG9hZC5pbnZpdGVEYXRhOwogICAgICAgICAgICAgICAgbG9nKCJoYW5kbGVOZXdJbnZpdGF0aW9uUmVjZWl2ZWQgIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpKTsKCiAgICAgICAgICAgICAgICBpZiAoIWludml0ZURhdGEuY2FsbEVuZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOacgOWQjuS4gOS4quS6uuWPkemAgSBpbnZpdGUg6L+b6KGM5oyC5patCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNhbGxTdGF0dXMiLCAiaWRsZSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBpZiAoIShzcG9uc29yID09PSB0aGlzLmxvZ2luVXNlckluZm8udXNlcklkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5jYWxsU3RhdHVzID09PSAiY2FsbGluZyIgfHwgdGhpcy5jYWxsU3RhdHVzID09PSAiY29ubmVjdGVkIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiR0cnRjQ2FsbGluZy5yZWplY3QoewogICAgICAgICAgICAgICAgICBpbnZpdGVJRDogaW52aXRlSUQsCiAgICAgICAgICAgICAgICAgIGlzQnVzeTogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBjYWxsVHlwZSA9IGludml0ZURhdGEuY2FsbFR5cGU7CiAgICAgICAgICAgICAgICB0aGlzLmludml0ZURhdGEgPSBpbnZpdGVEYXRhOwogICAgICAgICAgICAgICAgdGhpcy5pbnZpdGVJRCA9IGludml0ZUlEOwogICAgICAgICAgICAgICAgdGhpcy5pc0ludml0ZXJDYW5jZWxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVJc0ludml0ZXIiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNhbGxTdGF0dXMiLCAiY2FsbGluZyIpOwogICAgICAgICAgICAgICAgdXNlck5hbWUgPSBzcG9uc29yOwogICAgICAgICAgICAgICAgdGhpcy5pbnZpdGVyTmFtZSA9IHVzZXJOYW1lOwogICAgICAgICAgICAgICAgdGhpcy5jYWxsVHlwZURpc3BsYXlOYW1lID0gY2FsbFR5cGUgPT09IHRoaXMuVHJ0Y0NhbGxpbmcuQ0FMTF9UWVBFLkFVRElPX0NBTEwgPyAi6K+t6Z+z6YCa6K+dIiA6ICLop4bpopHpgJror50iOwogICAgICAgICAgICAgICAgdGhpcy5pc1Nob3dOZXdJbnZpdGF0aW9uRGlhbG9nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZU5ld0ludml0YXRpb25SZWNlaXZlZChfeCkgewogICAgICAgIHJldHVybiBfaGFuZGxlTmV3SW52aXRhdGlvblJlY2VpdmVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVOZXdJbnZpdGF0aW9uUmVjZWl2ZWQ7CiAgICB9KCksCiAgICBnZXROZXdJbnZpdGF0aW9uRGlhbG9nQ29udGVudDogZnVuY3Rpb24gZ2V0TmV3SW52aXRhdGlvbkRpYWxvZ0NvbnRlbnQoKSB7CiAgICAgIHJldHVybiAiXHU2NzY1XHU4MUVBIi5jb25jYXQodGhpcy5pbnZpdGVyTmFtZSwgIlx1NzY4NCIpLmNvbmNhdCh0aGlzLmNhbGxUeXBlRGlzcGxheU5hbWUpOwogICAgfSwKICAgIGhhbmRsZVJlamVjdENhbGw6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVSZWplY3RDYWxsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY2FsbFR5cGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIGNhbGxUeXBlID0gdGhpcy5pbnZpdGVEYXRhLmNhbGxUeXBlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRydGNDYWxsaW5nLnJlamVjdCh7CiAgICAgICAgICAgICAgICAgIGludml0ZUlEOiB0aGlzLmludml0ZUlELAogICAgICAgICAgICAgICAgICBpc0J1c3k6IGZhbHNlLAogICAgICAgICAgICAgICAgICBjYWxsVHlwZTogY2FsbFR5cGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0aGlzLmRpc3NvbHZlTWVldGluZ0lmTmVlZCgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3NvbHZlTWVldGluZ0lmTmVlZCgpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlamVjdENhbGwoKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVSZWplY3RDYWxsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVSZWplY3RDYWxsOwogICAgfSgpLAogICAgaGFuZGxlRGVib3VuY2U6IGZ1bmN0aW9uIGhhbmRsZURlYm91bmNlKGZ1bmMsIHdhaXQpIHsKICAgICAgdmFyIGNvbnRleHQgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAgIH0sIHdhaXQpOwogICAgfSwKICAgIGhhbmRsZUFjY2VwdENhbGw6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVBY2NlcHRDYWxsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgX3RoaXMkaW52aXRlRGF0YSwgY2FsbFR5cGUsIHJvb21JRDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF90aGlzJGludml0ZURhdGEgPSB0aGlzLmludml0ZURhdGEsIGNhbGxUeXBlID0gX3RoaXMkaW52aXRlRGF0YS5jYWxsVHlwZSwgcm9vbUlEID0gX3RoaXMkaW52aXRlRGF0YS5yb29tSUQ7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVzZXJKb2luTWVldGluZyIsIHRoaXMubG9naW5Vc2VySW5mby51c2VySWQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRydGNDYWxsaW5nLmFjY2VwdCh7CiAgICAgICAgICAgICAgICAgIGludml0ZUlEOiB0aGlzLmludml0ZUlELAogICAgICAgICAgICAgICAgICByb29tSUQ6IHJvb21JRCwKICAgICAgICAgICAgICAgICAgY2FsbFR5cGU6IGNhbGxUeXBlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgdGhpcy5pc1Nob3dOZXdJbnZpdGF0aW9uRGlhbG9nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKGNhbGxUeXBlID09PSB0aGlzLlRydGNDYWxsaW5nLkNBTExfVFlQRS5BVURJT19DQUxMICYmIHRoaXMuJHJvdXRlci5oaXN0b3J5LmN1cnJlbnQuZnVsbFBhdGggIT09ICIvYXVkaW8tY2FsbCIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hdWRpby1jYWxsIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhbGxUeXBlID09PSB0aGlzLlRydGNDYWxsaW5nLkNBTExfVFlQRS5WSURFT19DQUxMICYmIHRoaXMuJHJvdXRlci5oaXN0b3J5LmN1cnJlbnQuZnVsbFBhdGggIT09ICIvdmlkZW8tY2FsbCIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi92aWRlby1jYWxsIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3NvbHZlTWVldGluZ0lmTmVlZCgpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzLCBbWzAsIDldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZUFjY2VwdENhbGwoKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVBY2NlcHRDYWxsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVBY2NlcHRDYWxsOwogICAgfSgpLAogICAgaGFuZGxlVXNlckVudGVyOiBmdW5jdGlvbiBoYW5kbGVVc2VyRW50ZXIoX3JlZikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB1c2VySUQgPSBfcmVmLnVzZXJJRDsKICAgICAgLy8g5bu656uL6L+e5o6lCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXNlckpvaW5NZWV0aW5nIiwgdXNlcklEKTsKCiAgICAgIGlmICh0aGlzLmNhbGxTdGF0dXMgPT09ICJjYWxsaW5nIikgewogICAgICAgIC8vIOWmguaenOaYr+mCgOivt+iAhSwg5YiZ5bu656uL6L+e5o6lCiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8g6ZyA6KaB5YWI562J6L+c56iL55So5oi3IGlkIOeahOiKgueCuea4suafk+WIsCBkb20g5LiKCiAgICAgICAgICBfdGhpczIuJHN0b3JlLmNvbW1pdCgidXBkYXRlQ2FsbFN0YXR1cyIsICJjb25uZWN0ZWQiKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDnrKxuIChuID49IDMp5Liq5Lq66KKr6YKA6K+35YWl5LyaLCDlubbkuJTku5bkuI3mmK/nrKwgbiDkuKrkurrnmoTpgoDor7fkuroKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyDpnIDopoHlhYjnrYnov5znqIvnlKjmiLcgaWQg55qE6IqC54K55riy5p+T5YiwIGRvbSDkuIoKICAgICAgICAgIF90aGlzMi4kdHJ0Y0NhbGxpbmcuc3RhcnRSZW1vdGVWaWV3KHsKICAgICAgICAgICAgdXNlcklEOiB1c2VySUQsCiAgICAgICAgICAgIHZpZGVvVmlld0RvbUlEOiAidmlkZW8tIi5jb25jYXQodXNlcklEKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVVc2VyTGVhdmU6IGZ1bmN0aW9uIGhhbmRsZVVzZXJMZWF2ZShfcmVmMikgewogICAgICB2YXIgdXNlcklEID0gX3JlZjIudXNlcklEOwoKICAgICAgaWYgKHRoaXMubWVldGluZ1VzZXJJZExpc3QubGVuZ3RoID09IDIpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNhbGxTdGF0dXMiLCAiaWRsZSIpOwogICAgICB9CgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVzZXJMZWF2ZU1lZXRpbmciLCB1c2VySUQpOwogICAgfSwKICAgIGhhbmRsZUludml0ZWVSZWplY3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVJbnZpdGVlUmVqZWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihfcmVmMykgewogICAgICAgIHZhciB1c2VySUQsIHVzZXJOYW1lOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1c2VySUQgPSBfcmVmMy51c2VySUQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VXNlcm5hbWVCeVVzZXJpZCh1c2VySUQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB1c2VyTmFtZSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCIiLmNvbmNhdCh1c2VyTmFtZSwgIlx1NjJEMlx1N0VERFx1OTAxQVx1OEJERCIpKTsKICAgICAgICAgICAgICAgIHRoaXMuZGlzc29sdmVNZWV0aW5nSWZOZWVkKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZUludml0ZWVSZWplY3QoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVJbnZpdGVlUmVqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVJbnZpdGVlUmVqZWN0OwogICAgfSgpLAogICAgaGFuZGxlSW52aXRlZUxpbmVCdXN5OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaGFuZGxlSW52aXRlZUxpbmVCdXN5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhfcmVmNCkgewogICAgICAgIHZhciB1c2VySUQsIHVzZXJOYW1lOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1c2VySUQgPSBfcmVmNC51c2VySUQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VXNlcm5hbWVCeVVzZXJpZCh1c2VySUQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB1c2VyTmFtZSA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCIiLmNvbmNhdCh1c2VyTmFtZSwgIlx1NUZEOVx1N0VCRiIpKTsKICAgICAgICAgICAgICAgIHRoaXMuZGlzc29sdmVNZWV0aW5nSWZOZWVkKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZUludml0ZWVMaW5lQnVzeShfeDMpIHsKICAgICAgICByZXR1cm4gX2hhbmRsZUludml0ZWVMaW5lQnVzeS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlSW52aXRlZUxpbmVCdXN5OwogICAgfSgpLAogICAgaGFuZGxlSW52aXRlckNhbmNlbDogZnVuY3Rpb24gaGFuZGxlSW52aXRlckNhbmNlbCgpIHsKICAgICAgLy8g6YKA6K+36KKr5Y+W5raICiAgICAgIHRoaXMuaXNTaG93TmV3SW52aXRhdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIumAmuivneW3suWPlua2iCIpOwogICAgICB0aGlzLmRpc3NvbHZlTWVldGluZ0lmTmVlZCgpOwogICAgfSwKICAgIGhhbmRsZUtpY2tlZE91dDogZnVuY3Rpb24gaGFuZGxlS2lja2VkT3V0KCkgewogICAgICAvL+mHjeWkjeeZu+mZhu+8jOiiq+i4ouWHuuaIv+mXtAogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5sb2dvdXQoKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyTG9nb3V0U3VjY2VzcyIpOwogICAgfSwKICAgIC8vIOS9nOS4uuiiq+mCgOivt+aWueS8muaUtuWIsO+8jOaUtuWIsOivpeWbnuiwg+ivtOaYjuacrOasoemAmuivnei2heaXtuacquW6lOetlAogICAgaGFuZGxlQ2FsbFRpbWVvdXQ6IGZ1bmN0aW9uIGhhbmRsZUNhbGxUaW1lb3V0KCkgewogICAgICB0aGlzLmlzU2hvd05ld0ludml0YXRpb25EaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLpgJror53otoXml7bmnKrlupTnrZQiKTsKICAgICAgdGhpcy5kaXNzb2x2ZU1lZXRpbmdJZk5lZWQoKTsKICAgIH0sCiAgICBoYW5kbGVDYWxsRW5kOiBmdW5jdGlvbiBoYW5kbGVDYWxsRW5kKCkgewogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumAmuivneW3sue7k+adnyIpOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5oYW5ndXAoKTsKICAgICAgdGhpcy5kaXNzb2x2ZU1lZXRpbmdJZk5lZWQoKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgIH0sCiAgICBoYW5kbGVOb1Jlc3BvbnNlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaGFuZGxlTm9SZXNwb25zZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoX3JlZjUpIHsKICAgICAgICB2YXIgdXNlcklELCB1c2VyTmFtZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXNlcklEID0gX3JlZjUudXNlcklEOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldFVzZXJuYW1lQnlVc2VyaWQodXNlcklEKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdXNlck5hbWUgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygiIi5jb25jYXQodXNlck5hbWUsICJcdTY1RTBcdTVFOTRcdTdCNTQiKSk7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3NvbHZlTWVldGluZ0lmTmVlZCgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBoYW5kbGVOb1Jlc3BvbnNlKF94NCkgewogICAgICAgIHJldHVybiBfaGFuZGxlTm9SZXNwb25zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlTm9SZXNwb25zZTsKICAgIH0oKSwKICAgIGhhbmRsZVVzZXJWaWRlb0NoYW5nZTogZnVuY3Rpb24gaGFuZGxlVXNlclZpZGVvQ2hhbmdlKF9yZWY2KSB7CiAgICAgIHZhciB1c2VySUQgPSBfcmVmNi51c2VySUQsCiAgICAgICAgICBpc1ZpZGVvQXZhaWxhYmxlID0gX3JlZjYuaXNWaWRlb0F2YWlsYWJsZTsKICAgICAgbG9nKCJoYW5kbGVVc2VyVmlkZW9DaGFuZ2UgdXNlcklELCAiLmNvbmNhdCh1c2VySUQsICIgaXNWaWRlb0F2YWlsYWJsZSAiKS5jb25jYXQoaXNWaWRlb0F2YWlsYWJsZSkpOwoKICAgICAgaWYgKGlzVmlkZW9BdmFpbGFibGUpIHsKICAgICAgICB2YXIgbXV0ZVVzZXJMaXN0ID0gdGhpcy5tdXRlQXVkaW9Vc2VySWRMaXN0LmZpbHRlcihmdW5jdGlvbiAoY3VycmVudElEKSB7CiAgICAgICAgICByZXR1cm4gY3VycmVudElEICE9PSB1c2VySUQ7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXRlVmlkZW9Vc2VySWRMaXN0IiwgbXV0ZVVzZXJMaXN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX211dGVVc2VyTGlzdCA9IHRoaXMubXV0ZUF1ZGlvVXNlcklkTGlzdC5jb25jYXQodXNlcklEKTsKCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXRlVmlkZW9Vc2VySWRMaXN0IiwgX211dGVVc2VyTGlzdCk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVVc2VyQXVkaW9DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVVzZXJBdWRpb0NoYW5nZShfcmVmNykgewogICAgICB2YXIgdXNlcklEID0gX3JlZjcudXNlcklELAogICAgICAgICAgaXNBdWRpb0F2YWlsYWJsZSA9IF9yZWY3LmlzQXVkaW9BdmFpbGFibGU7CiAgICAgIGxvZygiaGFuZGxlVXNlckF1ZGlvQ2hhbmdlIHVzZXJJRCwgIi5jb25jYXQodXNlcklELCAiIGlzQXVkaW9BdmFpbGFibGUgIikuY29uY2F0KGlzQXVkaW9BdmFpbGFibGUpKTsKCiAgICAgIGlmIChpc0F1ZGlvQXZhaWxhYmxlKSB7CiAgICAgICAgdmFyIG11dGVVc2VyTGlzdCA9IHRoaXMubXV0ZUF1ZGlvVXNlcklkTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnRJRCkgewogICAgICAgICAgcmV0dXJuIGN1cnJlbnRJRCAhPT0gdXNlcklEOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlTXV0ZUF1ZGlvVXNlcklkTGlzdCIsIG11dGVVc2VyTGlzdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9tdXRlVXNlckxpc3QyID0gdGhpcy5tdXRlQXVkaW9Vc2VySWRMaXN0LmNvbmNhdCh1c2VySUQpOwoKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZU11dGVBdWRpb1VzZXJJZExpc3QiLCBfbXV0ZVVzZXJMaXN0Mik7CiAgICAgIH0KICAgIH0sCiAgICBkaXNzb2x2ZU1lZXRpbmdJZk5lZWQ6IGZ1bmN0aW9uIGRpc3NvbHZlTWVldGluZ0lmTmVlZCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDYWxsU3RhdHVzIiwgImlkbGUiKTsKICAgICAgdGhpcy5pc1Nob3dOZXdJbnZpdGF0aW9uRGlhbG9nID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5tZWV0aW5nVXNlcklkTGlzdC5sZW5ndGggPCAyKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJkaXNzb2x2ZU1lZXRpbmciKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">\n    <header-nav></header-nav>\n    <transition name=\"fade\" mode=\"out-in\">\n      <router-view class=\"view\"></router-view>\n    </transition>\n    <el-dialog :title=\"callTypeDisplayName\" :visible.sync=\"isShowNewInvitationDialog\" width=\"400px\">\n      <span>{{this.getNewInvitationDialogContent()}}</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleRejectCall\">拒绝</el-button>\n        <el-button type=\"primary\" @click=\"handleDebounce(handleAcceptCall, 500)\">接听</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { log } from \"./utils\";\nimport { getUsernameByUserid } from \"./service\";\nimport HeaderNav from \"./components/header-nav\";\nlet timeout;\n\nexport default {\n  name: \"App\",\n  components: {\n    HeaderNav\n  },\n  watch: {\n    isLogin: function(newIsLogin, oldIsLogin) {\n      if (newIsLogin !== oldIsLogin) {\n        if (newIsLogin) {\n          if (this.$router.history.current.path === \"/login\") {\n            // 防止已在 '/' 路由下再次 push\n            this.$router.push(\"/\");\n          }\n        } else {\n          this.$router.push(\"/login\");\n        }\n      }\n    }\n  },\n  computed: mapState({\n    isLogin: state => state.isLogin,\n    loginUserInfo: state => state.loginUserInfo,\n    callStatus: state => state.callStatus,\n    meetingUserIdList: state => state.meetingUserIdList,\n    muteVideoUserIdList: state => state.muteVideoUserIdList,\n    muteAudioUserIdList: state => state.muteAudioUserIdList\n  }),\n  async created() {\n    this.initListener();\n    await this.handleAutoLogin();\n  },\n  data() {\n    return {\n      isInviterCanceled: false,\n      isShowNewInvitationDialog: false,\n      inviterName: \"\",\n      callTypeDisplayName: \"\",\n      inviteData: {},\n      inviteID: \"\"\n    };\n  },\n  destroyed() {\n    this.removeListener();\n  },\n  methods: {\n    handleAutoLogin: async function() {},\n    initListener: function() {\n      this.$trtcCalling.on(this.TrtcCalling.EVENT.ERROR, this.handleError);\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.INVITED,\n        this.handleNewInvitationReceived\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.USER_ENTER,\n        this.handleUserEnter\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.USER_LEAVE,\n        this.handleUserLeave\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.REJECT,\n        this.handleInviteeReject\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.LINE_BUSY,\n        this.handleInviteeLineBusy\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.CALLING_CANCEL,\n        this.handleInviterCancel\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.KICKED_OUT,\n        this.handleKickedOut\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.CALLING_TIMEOUT,\n        this.handleCallTimeout\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.NO_RESP,\n        this.handleNoResponse\n      );\n      this.$trtcCalling.on(this.TrtcCalling.EVENT.CALL_END, this.handleCallEnd);\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.USER_VIDEO_AVAILABLE,\n        this.handleUserVideoChange\n      );\n      this.$trtcCalling.on(\n        this.TrtcCalling.EVENT.USER_AUDIO_AVAILABLE,\n        this.handleUserAudioChange\n      );\n    },\n    removeListener: function() {\n      this.$trtcCalling.off(this.TrtcCalling.EVENT.ERROR, this.handleError);\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.INVITED,\n        this.handleNewInvitationReceived\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.USER_ENTER,\n        this.handleUserEnter\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.USER_LEAVE,\n        this.handleUserLeave\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.REJECT,\n        this.handleInviteeReject\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.LINE_BUSY,\n        this.handleInviteeLineBusy\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.CALLING_CANCEL,\n        this.handleInviterCancel\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.KICKED_OUT,\n        this.handleKickedOut\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.CALLING_TIMEOUT,\n        this.handleCallTimeout\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.NO_RESP,\n        this.handleNoResponse\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.CALL_END,\n        this.handleCallEnd\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.USER_VIDEO_AVAILABLE,\n        this.handleUserVideoChange\n      );\n      this.$trtcCalling.off(\n        this.TrtcCalling.EVENT.USER_AUDIO_AVAILABLE,\n        this.handleUserAudioChange\n      );\n    },\n    handleError: function() {},\n    handleNewInvitationReceived: async function(payload) {\n      const { inviteID, sponsor, inviteData } = payload;\n      log(`handleNewInvitationReceived ${JSON.stringify(payload)}`);\n      if (inviteData.callEnd) {\n        // 最后一个人发送 invite 进行挂断\n        this.$store.commit(\"updateCallStatus\", \"idle\");\n        return;\n      }\n      if (sponsor === this.loginUserInfo.userId) {\n        // 邀请人是自己, 同一个账号有可能在多端登录\n        return;\n      }\n      // 这里需要考虑忙线的情况\n      if (this.callStatus === \"calling\" || this.callStatus === \"connected\") {\n        await this.$trtcCalling.reject({ inviteID, isBusy: true });\n        return;\n      }\n\n      const { callType } = inviteData;\n      this.inviteData = inviteData;\n      this.inviteID = inviteID;\n      this.isInviterCanceled = false;\n      this.$store.commit(\"updateIsInviter\", false);\n      this.$store.commit(\"updateCallStatus\", \"calling\");\n      const userName = sponsor;\n      this.inviterName = userName;\n      this.callTypeDisplayName =\n        callType === this.TrtcCalling.CALL_TYPE.AUDIO_CALL\n          ? \"语音通话\"\n          : \"视频通话\";\n      this.isShowNewInvitationDialog = true;\n    },\n    getNewInvitationDialogContent: function() {\n      return `来自${this.inviterName}的${this.callTypeDisplayName}`;\n    },\n    handleRejectCall: async function() {\n      try {\n        const { callType } = this.inviteData;\n        await this.$trtcCalling.reject({\n          inviteID: this.inviteID,\n          isBusy: false,\n          callType\n        });\n        this.dissolveMeetingIfNeed();\n      } catch (e) {\n        this.dissolveMeetingIfNeed();\n      }\n    },\n\n    handleDebounce: function(func, wait) {\n      let context = this;\n      let args = arguments;\n      if (timeout) clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        func.apply(context, args);\n      }, wait);\n    },\n\n    handleAcceptCall: async function() {\n      try {\n        const { callType, roomID } = this.inviteData;\n        this.$store.commit(\"userJoinMeeting\", this.loginUserInfo.userId);\n        await this.$trtcCalling.accept({\n          inviteID: this.inviteID,\n          roomID,\n          callType\n        });\n        this.isShowNewInvitationDialog = false;\n        if (\n          callType === this.TrtcCalling.CALL_TYPE.AUDIO_CALL &&\n          this.$router.history.current.fullPath !== \"/audio-call\"\n        ) {\n          this.$router.push(\"/audio-call\");\n        } else if (\n          callType === this.TrtcCalling.CALL_TYPE.VIDEO_CALL &&\n          this.$router.history.current.fullPath !== \"/video-call\"\n        ) {\n          this.$router.push(\"/video-call\");\n        }\n      } catch (e) {\n        this.dissolveMeetingIfNeed();\n      }\n    },\n    handleUserEnter: function({ userID }) {\n      // 建立连接\n      this.$store.commit(\"userJoinMeeting\", userID);\n      if (this.callStatus === \"calling\") {\n        // 如果是邀请者, 则建立连接\n        this.$nextTick(() => {\n          // 需要先等远程用户 id 的节点渲染到 dom 上\n          this.$store.commit(\"updateCallStatus\", \"connected\");\n        });\n      } else {\n        // 第n (n >= 3)个人被邀请入会, 并且他不是第 n 个人的邀请人\n        this.$nextTick(() => {\n          // 需要先等远程用户 id 的节点渲染到 dom 上\n          this.$trtcCalling.startRemoteView({\n            userID: userID,\n            videoViewDomID: `video-${userID}`\n          });\n        });\n      }\n    },\n    handleUserLeave: function({ userID }) {\n      if (this.meetingUserIdList.length == 2) {\n        this.$store.commit(\"updateCallStatus\", \"idle\");\n      }\n      this.$store.commit(\"userLeaveMeeting\", userID);\n    },\n    handleInviteeReject: async function({ userID }) {\n      const userName = await getUsernameByUserid(userID);\n      this.$message.warning(`${userName}拒绝通话`);\n      this.dissolveMeetingIfNeed();\n    },\n    handleInviteeLineBusy: async function({ userID }) {\n      const userName = await getUsernameByUserid(userID);\n      this.$message.warning(`${userName}忙线`);\n      this.dissolveMeetingIfNeed();\n    },\n    handleInviterCancel: function() {\n      // 邀请被取消\n      this.isShowNewInvitationDialog = false;\n      this.$message.warning(\"通话已取消\");\n      this.dissolveMeetingIfNeed();\n    },\n    handleKickedOut: function() {\n      //重复登陆，被踢出房间\n      this.$trtcCalling.logout();\n      this.$store.commit(\"userLogoutSuccess\");\n    },\n    // 作为被邀请方会收到，收到该回调说明本次通话超时未应答\n    handleCallTimeout: function() {\n      this.isShowNewInvitationDialog = false;\n      this.$message.warning(\"通话超时未应答\");\n      this.dissolveMeetingIfNeed();\n    },\n    handleCallEnd: function() {\n      this.$message.success(\"通话已结束\");\n      this.$trtcCalling.hangup();\n      this.dissolveMeetingIfNeed();\n      this.$router.push(\"/\");\n    },\n    handleNoResponse: async function({ userID }) {\n      const userName = await getUsernameByUserid(userID);\n      this.$message.warning(`${userName}无应答`);\n      this.dissolveMeetingIfNeed();\n    },\n    handleUserVideoChange: function({ userID, isVideoAvailable }) {\n      log(\n        `handleUserVideoChange userID, ${userID} isVideoAvailable ${isVideoAvailable}`\n      );\n      if (isVideoAvailable) {\n        const muteUserList = this.muteAudioUserIdList.filter(\n          currentID => currentID !== userID\n        );\n        this.$store.commit(\"updateMuteVideoUserIdList\", muteUserList);\n      } else {\n        const muteUserList = this.muteAudioUserIdList.concat(userID);\n        this.$store.commit(\"updateMuteVideoUserIdList\", muteUserList);\n      }\n    },\n    handleUserAudioChange: function({ userID, isAudioAvailable }) {\n      log(\n        `handleUserAudioChange userID, ${userID} isAudioAvailable ${isAudioAvailable}`\n      );\n      if (isAudioAvailable) {\n        const muteUserList = this.muteAudioUserIdList.filter(\n          currentID => currentID !== userID\n        );\n        this.$store.commit(\"updateMuteAudioUserIdList\", muteUserList);\n      } else {\n        const muteUserList = this.muteAudioUserIdList.concat(userID);\n        this.$store.commit(\"updateMuteAudioUserIdList\", muteUserList);\n      }\n    },\n    dissolveMeetingIfNeed() {\n      this.$store.commit(\"updateCallStatus\", \"idle\");\n      this.isShowNewInvitationDialog = false;\n      if (this.meetingUserIdList.length < 2) {\n        this.$store.commit(\"dissolveMeeting\");\n      }\n    }\n  }\n};\n</script>\n\n<style>\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin: 0;\n  padding: 0;\n  background: aliceblue;\n  height: 100%;\n}\n@media screen and (max-width: 767px) {\n  .el-message {\n    min-width: 180px;\n  }\n}\n</style>\n"],"sourceRoot":"src"}]}