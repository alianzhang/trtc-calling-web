{"remainingRequest":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/babel-loader/lib/index.js!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/components/video-call/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/src/components/video-call/index.vue","mtime":1604998570000},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js","mtime":1610420035136},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/babel-loader/lib/index.js","mtime":1607423996145},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/cache-loader/dist/cjs.js","mtime":1610420035136},{"path":"/Users/xuzhitao/Desktop/Web/TRTCScenesDemo/trtc-calling-web/node_modules/vue-loader/lib/index.js","mtime":1610420042252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveHV6aGl0YW8vRGVza3RvcC9XZWIvVFJUQ1NjZW5lc0RlbW8vdHJ0Yy1jYWxsaW5nLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy94dXpoaXRhby9EZXNrdG9wL1dlYi9UUlRDU2NlbmVzRGVtby90cnRjLWNhbGxpbmctd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFNlYXJjaFVzZXIgZnJvbSAiLi4vc2VhcmNoLXVzZXIiOwppbXBvcnQgeyBnZXRVc2VybmFtZUJ5VXNlcmlkIH0gZnJvbSAiLi4vLi4vc2VydmljZSI7CmltcG9ydCBjb25maWcgZnJvbSAiLi4vLi4vY29uZmlnIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWaWRlb0NhbGwiLAogIGNvbXBvbmVudHM6IHsKICAgIFNlYXJjaFVzZXI6IFNlYXJjaFVzZXIKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBsb2dpblVzZXJJbmZvOiBmdW5jdGlvbiBsb2dpblVzZXJJbmZvKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5sb2dpblVzZXJJbmZvOwogICAgfSwKICAgIGNhbGxTdGF0dXM6IGZ1bmN0aW9uIGNhbGxTdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmNhbGxTdGF0dXM7CiAgICB9LAogICAgaXNJbnZpdGVyOiBmdW5jdGlvbiBpc0ludml0ZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlzSW52aXRlcjsKICAgIH0sCiAgICBtZWV0aW5nVXNlcklkTGlzdDogZnVuY3Rpb24gbWVldGluZ1VzZXJJZExpc3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm1lZXRpbmdVc2VySWRMaXN0OwogICAgfSwKICAgIG11dGVWaWRlb1VzZXJJZExpc3Q6IGZ1bmN0aW9uIG11dGVWaWRlb1VzZXJJZExpc3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm11dGVWaWRlb1VzZXJJZExpc3Q7CiAgICB9LAogICAgbXV0ZUF1ZGlvVXNlcklkTGlzdDogZnVuY3Rpb24gbXV0ZUF1ZGlvVXNlcklkTGlzdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubXV0ZUF1ZGlvVXNlcklkTGlzdDsKICAgIH0KICB9KSksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzU2hvd1ZpZGVvQ2FsbDogZmFsc2UsCiAgICAgIGlzVmlkZW9PbjogdHJ1ZSwKICAgICAgaXNBdWRpb09uOiB0cnVlLAogICAgICB1c2VySWQyTmFtZToge30KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuY2FsbFN0YXR1cyA9PT0gImNvbm5lY3RlZCIgJiYgIXRoaXMuaXNJbnZpdGVyKSB7CiAgICAgIHRoaXMuc3RhcnRNZWV0aW5nKCk7CiAgICAgIHRoaXMudXBkYXRlVXNlcklkMk5hbWUodGhpcy5tZWV0aW5nVXNlcklkTGlzdCk7CiAgICB9CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlTXV0ZVZpZGVvVXNlcklkTGlzdCIsIFtdKTsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlTXV0ZUF1ZGlvVXNlcklkTGlzdCIsIFtdKTsKCiAgICBpZiAodGhpcy5jYWxsU3RhdHVzID09PSAiY29ubmVjdGVkIikgewogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5oYW5ndXAoKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDYWxsU3RhdHVzIiwgImlkbGUiKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjYWxsU3RhdHVzOiBmdW5jdGlvbiBjYWxsU3RhdHVzKG5ld1N0YXR1cywgb2xkU3RhdHVzKSB7CiAgICAgIC8vIOS9nOS4uuiiq+mCgOivt+iAhSwg5bu656uL6YCa6K+d6L+e5o6lCiAgICAgIGlmIChuZXdTdGF0dXMgIT09IG9sZFN0YXR1cyAmJiBuZXdTdGF0dXMgPT09ICJjb25uZWN0ZWQiKSB7CiAgICAgICAgdGhpcy5zdGFydE1lZXRpbmcoKTsKICAgICAgICB0aGlzLnVwZGF0ZVVzZXJJZDJOYW1lKHRoaXMubWVldGluZ1VzZXJJZExpc3QpOwogICAgICB9CiAgICB9LAogICAgbWVldGluZ1VzZXJJZExpc3Q6IGZ1bmN0aW9uIG1lZXRpbmdVc2VySWRMaXN0KG5ld0xpc3QsIG9sZExpc3QpIHsKICAgICAgaWYgKG5ld0xpc3QgIT09IG9sZExpc3QgfHwgbmV3TGlzdC5sZW5ndGggIT09IG9sZExpc3QpIHsKICAgICAgICB0aGlzLnVwZGF0ZVVzZXJJZDJOYW1lKG5ld0xpc3QpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDYWxsVXNlcjogZnVuY3Rpb24gaGFuZGxlQ2FsbFVzZXIoX3JlZikgewogICAgICB2YXIgcGFyYW0gPSBfcmVmLnBhcmFtOwogICAgICAvLyDlj6/orr7nva7otoXml7YKICAgICAgdGhpcy4kdHJ0Y0NhbGxpbmcuY2FsbCh7CiAgICAgICAgdXNlcklEOiBwYXJhbSwKICAgICAgICB0eXBlOiB0aGlzLlRydGNDYWxsaW5nLkNBTExfVFlQRS5WSURFT19DQUxMLAogICAgICAgIHRpbWVvdXQ6IGNvbmZpZy5DYWxsVGltZW91dAogICAgICB9KTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VySm9pbk1lZXRpbmciLCB0aGlzLmxvZ2luVXNlckluZm8udXNlcklkKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDYWxsU3RhdHVzIiwgImNhbGxpbmciKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVJc0ludml0ZXIiLCB0cnVlKTsKICAgIH0sCiAgICBoYW5kbGVDYW5jZWxDYWxsVXNlcjogZnVuY3Rpb24gaGFuZGxlQ2FuY2VsQ2FsbFVzZXIoKSB7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLmhhbmd1cCgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImRpc3NvbHZlTWVldGluZyIpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNhbGxTdGF0dXMiLCAiaWRsZSIpOwogICAgfSwKICAgIHN0YXJ0TWVldGluZzogZnVuY3Rpb24gc3RhcnRNZWV0aW5nKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubWVldGluZ1VzZXJJZExpc3QubGVuZ3RoID49IDMpIHsKICAgICAgICAvLyDlpJrkurrpgJror50KICAgICAgICB2YXIgbGFzdEpvaW5Vc2VyID0gdGhpcy5tZWV0aW5nVXNlcklkTGlzdFt0aGlzLm1lZXRpbmdVc2VySWRMaXN0Lmxlbmd0aCAtIDFdOwogICAgICAgIHRoaXMuJHRydGNDYWxsaW5nLnN0YXJ0UmVtb3RlVmlldyh7CiAgICAgICAgICB1c2VySUQ6IGxhc3RKb2luVXNlciwKICAgICAgICAgIHZpZGVvVmlld0RvbUlEOiAidmlkZW8tIi5jb25jYXQobGFzdEpvaW5Vc2VyKQogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5pc1Nob3dWaWRlb0NhbGwgPSB0cnVlOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5zdGFydExvY2FsVmlldyh7CiAgICAgICAgdXNlcklEOiB0aGlzLmxvZ2luVXNlckluZm8udXNlcklkLAogICAgICAgIHZpZGVvVmlld0RvbUlEOiAidmlkZW8tIi5jb25jYXQodGhpcy5sb2dpblVzZXJJbmZvLnVzZXJJZCkKICAgICAgfSk7CiAgICAgIHZhciBvdGhlclBhcnRpY2lwYW50cyA9IHRoaXMubWVldGluZ1VzZXJJZExpc3QuZmlsdGVyKGZ1bmN0aW9uICh1c2VySWQpIHsKICAgICAgICByZXR1cm4gdXNlcklkICE9PSBfdGhpcy5sb2dpblVzZXJJbmZvLnVzZXJJZDsKICAgICAgfSk7CiAgICAgIG90aGVyUGFydGljaXBhbnRzLmZvckVhY2goZnVuY3Rpb24gKHVzZXJJZCkgewogICAgICAgIF90aGlzLiR0cnRjQ2FsbGluZy5zdGFydFJlbW90ZVZpZXcoewogICAgICAgICAgdXNlcklEOiB1c2VySWQsCiAgICAgICAgICB2aWRlb1ZpZXdEb21JRDogInZpZGVvLSIuY29uY2F0KHVzZXJJZCkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlSGFuZ3VwOiBmdW5jdGlvbiBoYW5kbGVIYW5ndXAoKSB7CiAgICAgIHRoaXMuJHRydGNDYWxsaW5nLmhhbmd1cCgpOwogICAgICB0aGlzLmlzU2hvd1ZpZGVvQ2FsbCA9IGZhbHNlOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNhbGxTdGF0dXMiLCAiaWRsZSIpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgfSwKICAgIHRvZ2dsZVZpZGVvOiBmdW5jdGlvbiB0b2dnbGVWaWRlbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmlzVmlkZW9PbiA9ICF0aGlzLmlzVmlkZW9PbjsKCiAgICAgIGlmICh0aGlzLmlzVmlkZW9PbikgewogICAgICAgIHRoaXMuJHRydGNDYWxsaW5nLm9wZW5DYW1lcmEoKTsKICAgICAgICB2YXIgbXV0ZVVzZXJMaXN0ID0gdGhpcy5tdXRlVmlkZW9Vc2VySWRMaXN0LmZpbHRlcihmdW5jdGlvbiAodXNlcklkKSB7CiAgICAgICAgICByZXR1cm4gdXNlcklkICE9PSBfdGhpczIubG9naW5Vc2VySW5mby51c2VySWQ7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXRlVmlkZW9Vc2VySWRMaXN0IiwgbXV0ZVVzZXJMaXN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0cnRjQ2FsbGluZy5jbG9zZUNhbWVyYSgpOwoKICAgICAgICB2YXIgX211dGVVc2VyTGlzdCA9IHRoaXMubXV0ZVZpZGVvVXNlcklkTGlzdC5jb25jYXQodGhpcy5sb2dpblVzZXJJbmZvLnVzZXJJZCk7CgogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlTXV0ZVZpZGVvVXNlcklkTGlzdCIsIF9tdXRlVXNlckxpc3QpOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlQXVkaW86IGZ1bmN0aW9uIHRvZ2dsZUF1ZGlvKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuaXNBdWRpb09uID0gIXRoaXMuaXNBdWRpb09uOwogICAgICB0aGlzLiR0cnRjQ2FsbGluZy5zZXRNaWNNdXRlKCF0aGlzLmlzQXVkaW9Pbik7CgogICAgICBpZiAodGhpcy5pc0F1ZGlvT24pIHsKICAgICAgICB2YXIgbXV0ZVVzZXJMaXN0ID0gdGhpcy5tdXRlQXVkaW9Vc2VySWRMaXN0LmZpbHRlcihmdW5jdGlvbiAodXNlcklkKSB7CiAgICAgICAgICByZXR1cm4gdXNlcklkICE9PSBfdGhpczMubG9naW5Vc2VySW5mby51c2VySWQ7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXRlQXVkaW9Vc2VySWRMaXN0IiwgbXV0ZVVzZXJMaXN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX211dGVVc2VyTGlzdDIgPSB0aGlzLm11dGVBdWRpb1VzZXJJZExpc3QuY29uY2F0KHRoaXMubG9naW5Vc2VySW5mby51c2VySWQpOwoKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZU11dGVBdWRpb1VzZXJJZExpc3QiLCBfbXV0ZVVzZXJMaXN0Mik7CiAgICAgIH0KICAgIH0sCiAgICBpc1VzZXJNdXRlOiBmdW5jdGlvbiBpc1VzZXJNdXRlKG11dGVVc2VyTGlzdCwgdXNlcklkKSB7CiAgICAgIHJldHVybiBtdXRlVXNlckxpc3QuaW5kZXhPZih1c2VySWQpICE9PSAtMTsKICAgIH0sCiAgICB1cGRhdGVVc2VySWQyTmFtZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZVVzZXJJZDJOYW1lID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzZXJJZExpc3QpIHsKICAgICAgICB2YXIgdXNlcklkMk5hbWUsIGxvZ2luVXNlcklkLCBpLCB1c2VySWQsIHVzZXJOYW1lOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVzZXJJZDJOYW1lID0ge307CiAgICAgICAgICAgICAgICBsb2dpblVzZXJJZCA9IHRoaXMubG9naW5Vc2VySW5mby51c2VySWQ7CiAgICAgICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IHVzZXJJZExpc3QubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVzZXJJZCA9IHVzZXJJZExpc3RbaV07CgogICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlcklkMk5hbWVbdXNlcklkXSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldFVzZXJuYW1lQnlVc2VyaWQodXNlcklkKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgdXNlck5hbWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgdXNlcklkMk5hbWVbdXNlcklkXSA9IHVzZXJOYW1lOwoKICAgICAgICAgICAgICAgIGlmIChsb2dpblVzZXJJZCA9PT0gdXNlcklkKSB7CiAgICAgICAgICAgICAgICAgIHVzZXJJZDJOYW1lW3VzZXJJZF0gKz0gIihtZSkiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIHRoaXMudXNlcklkMk5hbWUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMudXNlcklkMk5hbWUpLCB1c2VySWQyTmFtZSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBkYXRlVXNlcklkMk5hbWUoX3gpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZVVzZXJJZDJOYW1lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVVc2VySWQyTmFtZTsKICAgIH0oKSwKICAgIGdvdG86IGZ1bmN0aW9uIGdvdG8ocGF0aCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"video-call-section\">\n    <div\n      class=\"video-call-section-header\"\n    >Welcome {{loginUserInfo && (loginUserInfo.name || loginUserInfo.userId)}}</div>\n    <div class=\"video-call-section-title\">视频通话</div>\n    <search-user @callUser=\"handleCallUser\" @cancelCallUser=\"handleCancelCallUser\"></search-user>\n    <div :class=\"{ 'video-conference': true, 'is-show': isShowVideoCall }\">\n      <div class=\"video-conference-header\">视频通话区域</div>\n\n      <div class=\"video-conference-list\">\n        <div\n          v-for=\"userId in meetingUserIdList\"\n          :key=\"`video-${userId}`\"\n          :id=\"`video-${userId}`\"\n          :class=\"{'user-video-container': true, 'is-me': userId === loginUserInfo.userId}\"\n        >\n          <div class=\"user-status\">\n            <div\n              :class=\"{'user-video-status': true, 'is-mute': isUserMute(muteVideoUserIdList, userId)}\"\n            ></div>\n            <div\n              :class=\"{'user-audio-status': true, 'is-mute': isUserMute(muteAudioUserIdList, userId)}\"\n            ></div>\n          </div>\n          <div class=\"video-item-username\">{{userId2Name[userId] || userId}}</div>\n        </div>\n      </div>\n      <div class=\"video-conference-action\">\n        <el-button\n          class=\"action-btn\"\n          type=\"success\"\n          @click=\"toggleVideo\"\n        >{{isVideoOn ? '关闭摄像头' : '打开摄像头'}}</el-button>\n\n        <el-button\n          class=\"action-btn\"\n          type=\"success\"\n          @click=\"toggleAudio\"\n        >{{isAudioOn ? '关闭麦克风' : '打开麦克风'}}</el-button>\n\n        <el-button class=\"action-btn\" type=\"danger\" @click=\"handleHangup\">挂断</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport SearchUser from \"../search-user\";\nimport { getUsernameByUserid } from \"../../service\";\nimport config from \"../../config\";\nexport default {\n  name: \"VideoCall\",\n  components: {\n    SearchUser\n  },\n  computed: {\n    ...mapState({\n      loginUserInfo: state => state.loginUserInfo,\n      callStatus: state => state.callStatus,\n      isInviter: state => state.isInviter,\n      meetingUserIdList: state => state.meetingUserIdList,\n      muteVideoUserIdList: state => state.muteVideoUserIdList,\n      muteAudioUserIdList: state => state.muteAudioUserIdList\n    })\n  },\n  data() {\n    return {\n      isShowVideoCall: false,\n      isVideoOn: true,\n      isAudioOn: true,\n      userId2Name: {}\n    };\n  },\n  mounted() {\n    if (this.callStatus === \"connected\" && !this.isInviter) {\n      this.startMeeting();\n      this.updateUserId2Name(this.meetingUserIdList);\n    }\n  },\n  destroyed() {\n    this.$store.commit(\"updateMuteVideoUserIdList\", []);\n    this.$store.commit(\"updateMuteAudioUserIdList\", []);\n    if (this.callStatus === \"connected\") {\n      this.$trtcCalling.hangup();\n      this.$store.commit(\"updateCallStatus\", \"idle\");\n    }\n  },\n  watch: {\n    callStatus: function(newStatus, oldStatus) {\n      // 作为被邀请者, 建立通话连接\n      if (newStatus !== oldStatus && newStatus === \"connected\") {\n        this.startMeeting();\n        this.updateUserId2Name(this.meetingUserIdList);\n      }\n    },\n    meetingUserIdList: function(newList, oldList) {\n      if (newList !== oldList || newList.length !== oldList) {\n        this.updateUserId2Name(newList);\n      }\n    }\n  },\n  methods: {\n    handleCallUser: function({ param }) {\n      // 可设置超时\n      this.$trtcCalling.call({\n        userID: param,\n        type: this.TrtcCalling.CALL_TYPE.VIDEO_CALL,\n        timeout: config.CallTimeout\n      });\n      this.$store.commit(\"userJoinMeeting\", this.loginUserInfo.userId);\n      this.$store.commit(\"updateCallStatus\", \"calling\");\n      this.$store.commit(\"updateIsInviter\", true);\n    },\n    handleCancelCallUser: function() {\n      this.$trtcCalling.hangup();\n      this.$store.commit(\"dissolveMeeting\");\n      this.$store.commit(\"updateCallStatus\", \"idle\");\n    },\n    startMeeting: function() {\n      if (this.meetingUserIdList.length >= 3) {\n        // 多人通话\n        const lastJoinUser = this.meetingUserIdList[\n          this.meetingUserIdList.length - 1\n        ];\n        this.$trtcCalling.startRemoteView({\n          userID: lastJoinUser,\n          videoViewDomID: `video-${lastJoinUser}`\n        });\n        return;\n      }\n      this.isShowVideoCall = true;\n      this.$trtcCalling.startLocalView({\n        userID: this.loginUserInfo.userId,\n        videoViewDomID: `video-${this.loginUserInfo.userId}`\n      });\n      const otherParticipants = this.meetingUserIdList.filter(\n        userId => userId !== this.loginUserInfo.userId\n      );\n      otherParticipants.forEach(userId => {\n        this.$trtcCalling.startRemoteView({\n          userID: userId,\n          videoViewDomID: `video-${userId}`\n        });\n      });\n    },\n    handleHangup: function() {\n      this.$trtcCalling.hangup();\n      this.isShowVideoCall = false;\n      this.$store.commit(\"updateCallStatus\", \"idle\");\n      this.$router.push(\"/\");\n    },\n    toggleVideo: function() {\n      this.isVideoOn = !this.isVideoOn;\n      if (this.isVideoOn) {\n        this.$trtcCalling.openCamera();\n        const muteUserList = this.muteVideoUserIdList.filter(\n          userId => userId !== this.loginUserInfo.userId\n        );\n        this.$store.commit(\"updateMuteVideoUserIdList\", muteUserList);\n      } else {\n        this.$trtcCalling.closeCamera();\n        const muteUserList = this.muteVideoUserIdList.concat(\n          this.loginUserInfo.userId\n        );\n        this.$store.commit(\"updateMuteVideoUserIdList\", muteUserList);\n      }\n    },\n    toggleAudio: function() {\n      this.isAudioOn = !this.isAudioOn;\n      this.$trtcCalling.setMicMute(!this.isAudioOn);\n      if (this.isAudioOn) {\n        const muteUserList = this.muteAudioUserIdList.filter(\n          userId => userId !== this.loginUserInfo.userId\n        );\n        this.$store.commit(\"updateMuteAudioUserIdList\", muteUserList);\n      } else {\n        const muteUserList = this.muteAudioUserIdList.concat(\n          this.loginUserInfo.userId\n        );\n        this.$store.commit(\"updateMuteAudioUserIdList\", muteUserList);\n      }\n    },\n    isUserMute: function(muteUserList, userId) {\n      return muteUserList.indexOf(userId) !== -1;\n    },\n    updateUserId2Name: async function(userIdList) {\n      let userId2Name = {};\n      let loginUserId = this.loginUserInfo.userId;\n      for (let i = 0; i < userIdList.length; i++) {\n        const userId = userIdList[i];\n        if (!this.userId2Name[userId]) {\n          const userName = await getUsernameByUserid(userId);\n          userId2Name[userId] = userName;\n          if (loginUserId === userId) {\n            userId2Name[userId] += \"(me)\";\n          }\n        }\n      }\n      this.userId2Name = {\n        ...this.userId2Name,\n        ...userId2Name\n      };\n    },\n    goto: function(path) {\n      this.$router.push(path);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.video-call-section {\n  padding-top: 50px;\n  width: 800px;\n  margin: 0 auto;\n}\n.video-call-section-header {\n  font-size: 24px;\n}\n.video-call-section-title {\n  margin-top: 30px;\n  font-size: 20px;\n}\n.video-conference {\n  display: none;\n  margin-top: 20px;\n}\n.video-conference.is-show {\n  display: block;\n}\n\n.video-conference-list {\n  display: flex;\n  flex-direction: row;\n  margin-top: 10px;\n}\n\n.user-video-container {\n  position: relative;\n  text-align: left;\n  width: 360px;\n  height: 240px;\n  margin: 10px;\n}\n\n.user-video-status {\n  position: absolute;\n  right: 50px;\n  bottom: 20px;\n  width: 24px;\n  height: 27px;\n  z-index: 10;\n  background-image: url(\"../../assets/camera-on.png\");\n  background-size: cover;\n}\n.user-video-status.is-mute {\n  background-image: url(\"../../assets/camera-off.png\");\n}\n\n.user-audio-status {\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n  width: 22px;\n  height: 27px;\n  z-index: 10;\n  background-image: url(\"../../assets/mic-on.png\");\n  background-size: cover;\n}\n\n.user-audio-status.is-mute {\n  background-image: url(\"../../assets/mic-off.png\");\n}\n\n.video-conference-action {\n  margin-top: 10px;\n}\n\n.video-item-username {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  z-index: 10;\n  color: #ffffff;\n}\n@media screen and (max-width: 767px) {\n  .video-call-section {\n    width: 100%;\n  }\n  .video-conference-list {\n    margin: 0;\n    padding: 10px;\n  }\n  .user-video-container {\n    margin: 5px;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/video-call"}]}